      <div class="modal-header">
        <h4 class="modal-title" id="reference-form-label">
          <%  if @reference.new_record? %>
            Create Reference
          <% else %>
            Edit Reference
          <% end %>
        </h4>
      </div>

      <%= bootstrap_nested_form_for(@reference, remote: true, layout: :horizontal, label_col: "col-sm-2", control_col: "col-sm-4") do |f| %>
        <div class="modal-body">
          <div id="save_reference_error"></div>
          <%= f.text_field :name %>

          <%= f.text_area :description %>
          <%= f.fields_for :fields do |field_form| %>
            <%= field_form.hidden_field :name %>
            <%= field_form.text_field :value, label: field_form.object.name, label_class: "field_name_label", class: "field_value" %>
              <%= field_form.link_to_remove '<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span>' %>
            <% end %>
          <p><%= f.link_to_add "Add a Field", :tasks, id: 'add-field-link' %></p>

        </div>
        <div class="modal-footer">
          <input type="submit" name="commit" value="Update" class="btn btn-default"  />
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        </div>
      <% end %>
